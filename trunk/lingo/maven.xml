<project default="default" xmlns:j="jelly:core" xmlns:ant="jelly:ant">

  <goal name="default" prereqs="clean, jar:install-snapshot"/>

  <goal name="dc">
    <attain>
      <attainGoal name="clean"/>
      <attainGoal name="jar:deploy"/>
      <j:set var="maven.test.skip" value="true"/>
      <attainGoal name="site:deploy"/>
      <attainGoal name="dist:deploy"/>
    </attain>
  </goal>

  <postGoal name="dist:prepare-src-filesystem">
    <!-- lets zap the build.xml -->
    <delete file="${maven.dist.src.assembly.dir}/build.xml"/>
  </postGoal>


  <postGoal name="dist:prepare-bin-filesystem">
    <mkdir dir="${maven.dist.bin.assembly.dir}/lib"/>

    <j:forEach var="lib" items="${pom.artifacts}">
      <echo>Processing ${lib.name}</echo>
      <j:if test="${lib.name.startsWith('concurrent') || lib.name.startsWith('active') || lib.name.startsWith('common') || lib.name.startsWith('jencks')}">
        <copy file="${lib.path}" todir="${maven.dist.bin.assembly.dir}/lib"/>
      </j:if>
    </j:forEach>
  </postGoal>


</project>
